<!doctype html>
<html lang="en">

  <head>
    <title>Super Mario 64 Main Theme - Lewis' Music Encoding Project</title>
    <meta charset="utf-8">
    <meta name="description" content="My project">
    <meta name="author" content="Me">
    <link rel="stylesheet" href="css/style.css" media="all" />
    <script src="js/verovio-toolkit.js"></script>
    <script src="js/utils.js"></script>
  </head>

  <body>

    <div id="content">
      <!-- ADD YOUR HTML CONTENT HERE! -->
      <h1>Lewis' project</h1>
      <h2>Metadata</h2>
      <p id="meta"></p>

    </div>

    <!-- **** DO NO EDIT BELOW THIS LINE **** -->
    <!-- * **** **** **** **** **** **** **** -->
	<div><h2>Score</h2></div>
	<div id="controls">
	<button id="prev">&lt;</button>
	<button id="next">&gt;</button>
	</div>
    <div id="score">
      <!-- THIS IS WHERE THE SCORE GOES AUTOMATICALLY -->
    </div>
	<div id="analysis">
		<h2>Analysis</h2>
		<h3>Music21</h3>
		<img src="images/sm64histogram.png" alt="Super Mario 64 Music21 Histogram" width="400" height="400">
		<img src="images/sm64pitchroll.png" alt="Super Mario 64 Music21 Pitch Roll" width="600" height="360">
		<p>
		<h3>jSymbolic</h3>
		<table>
			<thead><tr>
				<th>Number_of_Pitches</th>
				<th>Number_of_Pitch_Classes</th>
				<th>Range</th>
				<th>Mean_Pitch</th>
				<th>Mean_Pitch_Class</th>
				<th>Most_Common_Pitch</th>
				<th>Most_Common_Pitch_Class</th>
				<th>Prevalence_of_Most_Common_Pitch</th>
				</tr></thead>
				<tbody><tr>
				<td align="left">41</td>
				<td align="left">11</td>
				<td align="left">55</td>
				<td align="left">59</td>
				<td align="left">4.781</td>
				<td align="left">55</td>
				<td align="left">7</td>
				<td align="left">0.09251</td>
				</tr></tbody>
		</table>
		<table>
			<thead><tr>
				<th>Prevalence_of_Most_Common_Pitch_Class</th>
				<th>Interval_Between_Most_Prevalent_Pitches</th>
				<th>Interval_Between_Most_Prevalent_Pitch_Classes</th>
				<th>Pitch_Variability</th>
				</tr></thead>
				<tbody><tr>
				<td align="left">0.2238</td>
				<td align="left">5</td>
				<td align="left">7</td>
				<td align="left">13.47</td>
				</tr></tbody>
		</table>
		</p>
		<h3>Polyphonic Transcription</h3>
		<p>The original composition of the song (the Super Mario 64 Main Theme) was actually created through MuseScore notation software,
		and so perhaps does not even originally reflect the depth and detail of a “true” original composition - it is simpler in nature, 
		and it only contains one instrument, the piano. Even still, the computer transcribed version struggles to fully recreate the 
		original composition - during the less intense moments of the composition where there is less going on, the transcription 
		is accurate and sounds like the original does, but whenever the tempo steps up and many notes are played in quick succession 
		over the two staves, the transcription begins to make errors and sounds “off” from the original composition 
		(although the underlying sound is generally always there). Therefore, despite the simplicity of this composition, the computer 
		transcription is still only a somewhat accurate representation.</p>
			<h4>Original</h4>
				<img src="images/SM64_Original_1.png" alt="Super Mario 64 Main Theme Original Score Page 1" width="1000" height="1400">
				<img src="images/SM64_Original_2.png" alt="Super Mario 64 Main Theme Original Score Page 2" width="1000" height="1400">
			<h4>Transcription</h4>
				<img src="images/SM64_Transcribed_1.png" alt="Super Mario 64 Main Theme Transcribed Score Page 1" width="1000" height="1400">
				<img src="images/SM64_Transcribed_2.png" alt="Super Mario 64 Main Theme Transcribed Score Page 2" width="1000" height="1400">
				<img src="images/SM64_Transcribed_3.png" alt="Super Mario 64 Main Theme Transcribed Score Page 3" width="1000" height="1400">
				<img src="images/SM64_Transcribed_4.png" alt="Super Mario 64 Main Theme Transcribed Score Page 4" width="1000" height="1400">
				<img src="images/SM64_Transcribed_5.png" alt="Super Mario 64 Main Theme Transcribed Score Page 5" width="1000" height="1400">
	</div>
    <!-- THIS CALLS THE SCRIPT THAT GETS THE MEI SCORE -->
   <script src="js/sm64mei.js"></script>
    <script>
      var xhr = new XMLHttpRequest()
      xhr.open('GET', 'data/Super_Mario_64_Main_Theme.mei') // <-- change this to the right file
      xhr.send(null)

      /* Deal with the response */
      xhr.onreadystatechange = function () {
        var DONE = 4
        var OK = 200
        if (xhr.readyState === DONE) {
          if (xhr.status === OK) {
            var parser = new DOMParser()
            var meiDoc = parser.parseFromString(xhr.responseText,"text/xml")
            /* If your element has an authURI attribute, copy the folloiwng line, being sure to replace the "MY-XML-ID" with your element's actual xml:id.
            document.querySelector("#meta").innerHTML += "<a href=\"" + meiDoc.querySelector("[*|id='MY-XML-ID']").getAttribute('authURI') +"\"><p>" + meiDoc.querySelector("[*|id='MY-XML-ID']").textContent + "</p></a>"
           */
			document.querySelector("#meta").innerHTML += "<a href=\"" + meiDoc.querySelector("[*|id='t-3']").getAttribute('authURI') +"\"><p>" + meiDoc.querySelector("[*|id='t-3']").textContent + "</p></a>"
			document.querySelector("#meta").innerHTML += "<a href=\"" + meiDoc.querySelector("[*|id='e-2']").getAttribute('authURI') +"\"><p>" + meiDoc.querySelector("[*|id='e-2']").textContent + "</p></a>"
			document.querySelector("#meta").innerHTML += "<a href=\"" + meiDoc.querySelector("[*|id='c-2']").getAttribute('authURI') +"\"><p>" + meiDoc.querySelector("[*|id='c-2']").textContent + "</p></a>"
			document.querySelector("#meta").innerHTML += "<a href=\"" + meiDoc.querySelector("[*|id='userestrict']").getAttribute('authURI') +"\"><p>" + meiDoc.querySelector("[*|id='userestrict']").textContent + "</p></a>"
           /* If your element does not have an authURI attribute, copy the following line, being sure to replace the "MY-XML-ID" with your element's actual xml:id.
            document.querySelector("#meta").innerHTML += "<p>" + meiDoc.querySelector("[*|id='m-8']").textContent + "</p>"
            */
			document.querySelector("#meta").innerHTML += "<p>" + meiDoc.querySelector("[*|id='t-2']").textContent + "</p>"
          }
        }
      }
    </script>
  </body>

</html>